(()=>{"use strict";(()=>{class e{constructor(){if(document.querySelector(".ic-app"))try{const e=this.scrapeDashboardData();"undefined"!=typeof chrome&&chrome.runtime&&chrome.runtime.sendMessage({type:"dashboardData",data:e}).catch((e=>{console.error("Failed to send dashboard data:",e)}))}catch(e){console.error("Failed to scrape dashboard data:",e),"undefined"!=typeof chrome&&chrome.runtime&&chrome.runtime.sendMessage({type:"error",error:"Failed to scrape dashboard data"})}}scrapeDashboardData(){try{const e=[];return document.querySelectorAll(".context_module").forEach((t=>{const r=t.querySelector(".name")?.textContent?.trim()||"Unknown Course",o=[];t.querySelectorAll(".ig-row").forEach((e=>{const t=e.querySelector(".ig-title")?.textContent?.trim()||"",r=e.querySelector(".type_icon")?.getAttribute("title")||"",n=e.querySelector(".due_date_display")?.textContent?.trim()||"";t&&o.push({name:t,type:r,dueDate:n})})),o.length>0&&e.push({courseName:r,assignments:o})})),console.log("Extracted dashboard data:",e),e}catch(e){throw console.error("Error in scrapeDashboardData:",e),e}}}class t{constructor(){if(this.isGradesPage())try{const e=this.scrapeGradeData();"undefined"!=typeof chrome&&chrome.runtime&&chrome.runtime.sendMessage({type:"gradeData",data:e}).catch((e=>{console.error("Failed to send grade data:",e)}))}catch(e){console.error("Failed to scrape grade data:",e),"undefined"!=typeof chrome&&chrome.runtime&&chrome.runtime.sendMessage({type:"error",error:"Failed to scrape grade data"})}}isGradesPage(){const e=document.querySelector("h1.ic-Action-header__Heading")?.textContent,t=window.location.pathname.includes("/grades"),r=null!==document.getElementById("grades_summary"),o=null!==document.querySelector(".student_grades");return!!(e?.includes("Grade")||t||r||o)}scrapeGradeData(){try{const e=[".course-title","h2.course-title",".course_name","#course_name",".context_title","h1.ic-Action-header__Heading"];let t="";for(const r of e){const e=document.querySelector(r);if(e?.textContent?.trim()){t=e.textContent.trim();break}}if(!t){const e=document.querySelector(".ic-app-crumbs__title");t=e?.textContent?e.textContent.trim():document.title.split(":")[0].trim()}const r=[],o=document.querySelectorAll(".student_assignment, .assignment_graded");return 0===o.length&&console.warn("No assignment rows found"),console.log("Found",o.length,"assignment rows"),o.forEach((e=>{const t=[".title a",".title",".assignment_name"];let o="";for(const r of t){const t=e.querySelector(r);if(t?.textContent?.trim()){o=t.textContent.trim();break}}const n=e.querySelector(".grade, .score")?.textContent,a=e.querySelector(".points_possible, .total-points")?.textContent,s=e.querySelector(".assignment_group .group_weight, .weight")?.textContent,c="-"===n||"not a number"===n?0:this.parseNumber(n),d="also not a number"===a?0:this.parseNumber(a),i=s?this.parseNumber(s.replace("%","")):void 0;o&&r.push({name:o,points:c,pointsPossible:d,weight:i})})),console.log("Extracted assignments:",r),{courseName:t,assignments:r}}catch(e){throw console.error("Error in scrapeGradeData:",e),e}}parseNumber(e){if(!e||"-"===e||"not a number"===e||"also not a number"===e)return 0;const t=parseFloat(e.replace(/[^\d.-]/g,""));return isNaN(t)?0:t}}const r=()=>{document.querySelector(".ic-app")&&(new t,document.querySelector(".ic-Dashboard-header, .context_module")&&new e)};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",r):r()})()})();
//# sourceMappingURL=index.js.map