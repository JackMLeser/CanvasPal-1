(()=>{"use strict";new class{constructor(){this.urlInput=document.getElementById("ical-url"),this.dueDateWeight=document.getElementById("due-date-weight"),this.gradeWeight=document.getElementById("grade-weight"),this.impactWeight=document.getElementById("impact-weight"),this.assignmentsList=document.getElementById("assignments-list"),this.syncStatus=document.getElementById("sync-status"),this.errorMessage=document.getElementById("error-message"),this.initializeListeners(),this.loadSettings(),this.fetchAssignments(),chrome.runtime.onMessage.addListener(this.handleMessage.bind(this))}async loadSettings(){const e=await chrome.storage.sync.get(["icalUrl","weights"]);e.icalUrl&&(this.urlInput.value=e.icalUrl),e.weights&&(this.dueDateWeight.value=e.weights.dueDate.toString(),this.gradeWeight.value=e.weights.gradeWeight.toString(),this.impactWeight.value=e.weights.impact.toString())}initializeListeners(){this.urlInput.addEventListener("change",(()=>{chrome.storage.sync.set({icalUrl:this.urlInput.value})})),document.getElementById("sync-button")?.addEventListener("click",(()=>{chrome.runtime.sendMessage({type:"forceSync"})})),[this.dueDateWeight,this.gradeWeight,this.impactWeight].forEach((e=>{e.addEventListener("input",(()=>{chrome.storage.sync.set({weights:{dueDate:parseInt(this.dueDateWeight.value),gradeWeight:parseInt(this.gradeWeight.value),impact:parseInt(this.impactWeight.value)}})}))}))}async fetchAssignments(){try{const e=await chrome.runtime.sendMessage({type:"fetchAssignments"});this.displayAssignments(e)}catch(e){this.errorMessage.textContent="Failed to fetch assignments"}}displayAssignments(e){this.assignmentsList.innerHTML=e.map((e=>`\n            <div class="assignment">\n                <label class="completion-toggle">\n                    <input type="checkbox" \n                           ${e.completed?"checked":""} \n                           data-title="${e.title}">\n                    ${e.title}\n                </label>\n                <div class="details">\n                    Due: ${e.dueDate.toLocaleDateString()}\n                    ${e.gradeWeight?`Weight: ${e.gradeWeight}%`:""}\n                </div>\n            </div>\n        `)).join(""),this.assignmentsList.querySelectorAll(".completion-toggle input").forEach((e=>{e.addEventListener("change",(e=>{const t=e.target.dataset.title;t&&chrome.storage.local.set({[`assignment_${t}`]:e.target.checked})}))}))}handleMessage(e){"syncComplete"===e.type&&e.timestamp&&(this.syncStatus.textContent=`Last synced: ${new Date(e.timestamp).toLocaleTimeString()}`)}}})();
//# sourceMappingURL=index.js.map